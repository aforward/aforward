<!-- 
  Copyright (c) 2018 Eclipse Foundation, Inc.

  This program and the accompanying materials are made available under the
  terms of the Eclipse Public License v. 2.0 which is available at
  http://www.eclipse.org/legal/epl-2.0.

  Contributors:
    Christopher Guindon <chris.guindon@eclipse-foundation.org>

  SPDX-License-Identifier: EPL-2.0
-->
<footer id="{{- .Params.footer_id | default .Site.Params.footer_id | default "solstice-footer"}}"
        class="{{- .Params.footer_class | default .Site.Params.footer_class | default ""}}"
        style="padding-top: 30px; background-color: inherit;">
  <div class="container">
    <div class="row">
      <div id="copyright" class="col-md-16">
        <p id="copyright-text">{{ i18n "footer-copyright-text" | safeHTML}}</p>
      </div>
    </div>
  </div>
</footer>
<!-- Placed at the end of the document so the pages load faster -->
{{- with .Site.Params.js | default "https://www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/main.min.js"}}
<script src="{{ . | absURL }}"></script>
{{ end }}
{{ if isset .Site.Params "hugo_js" }}
  {{- with .Site.Params.hugo_js }}
    <script src="{{ . | absURL }}"></script>
  {{ end }}
{{ else }}
    <script src="{{ "/js/solstice.hugo.js" | absURL }}"></script>
{{ end }}

<!-- Read in mustache templates registered in page scratch -->
{{ range $key, $value := (.Page.Scratch.Get "mustache-templates") }}
<script id="{{ $key }}" type="text/html">
{{ readFile $value | safeHTML}}
</script>
{{ end }}
<!-- Initialize any newsroom components on the page -->
<script>
(function($, document) {
  {{ range (.Page.Scratch.Get "events-container-ids") }}
    $("#{{ . }}").eclipseFdnApi({
      type: "filteredEvents"
    });
  {{ end }}
  {{ range (.Page.Scratch.Get "news-container-ids") }}
    $("#{{ . }}").eclipseFdnApi({
      type: "newsItems"
    });
  {{ end }}
  {{ if ne .Page.Params.show_featured_story false }}
    $("{{ .Site.Params.featured_footer_selector | default "#featured-story" }}").eclipseFdnApi({
      type: "featuredStory"
    });
  {{ end }}
  {{ if ne .Page.Params.show_featured_footer false }}
    $("{{ .Site.Params.featured_footer_selector | default "#featured-footer" }}").eclipseFdnApi({
      type: "featuredFooter"
    });
  {{ end }}
})(jQuery, document);
</script>
